!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},s=i[e]=i[e]||[];return s.indexOf(t)==-1&&s.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},s=i[e]=i[e]||{};return s[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var s=i.indexOf(t);return s!=-1&&i.splice(s,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var s=0,n=i[s];t=t||[];for(var o=this._onceEvents&&this._onceEvents[e];n;){var r=o&&o[n];r&&(this.off(e,n),delete o[n]),n.apply(this,t),s+=r?0:1,n=i[s]}return this}},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}(window,function e(t,i){function s(e,t){for(var i in t)e[i]=t[i];return e}function n(e){var t=[];if(Array.isArray(e))t=e;else if("number"==typeof e.length)for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e);return t}function o(e,t,i){return this instanceof o?("string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=n(e),this.options=s({},this.options),"function"==typeof t?i=t:s(this.options,t),i&&this.on("always",i),this.getImages(),$&&(this.jqDeferred=new $.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(e,t,i)}function r(e){this.img=e}function a(e,t){this.url=e,this.element=t,this.img=new Image}var $=t.jQuery,h=t.console;o.prototype=Object.create(i.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&d[t]){for(var i=e.querySelectorAll("img"),s=0;s<i.length;s++){var n=i[s];this.addImage(n)}if("string"==typeof this.options.background){var o=e.querySelectorAll(this.options.background);for(s=0;s<o.length;s++){var r=o[s];this.addElementBackgroundImages(r)}}}};var d={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,s=i.exec(t.backgroundImage);null!==s;){var n=s&&s[2];n&&this.addBackground(n,e),s=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new a(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,s){setTimeout(function(){t.progress(e,i,s)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&h&&h.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(i.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype=Object.create(r.prototype),a.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},a.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&($=e,$.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise($(this))})},o.makeJQueryPlugin(),o}),jQuery(document).ready(function($){var e=$(".spreads"),t=0;$(e).slick({fade:!0,arrows:!1,speed:"0"});var i=window.location.pathname;path=i.substring(1),""!=path&&$(".spreads").slick("slickGoTo",path),$(".spreads").imagesLoaded(function(){$(".polyptych .frames img").each(function(){width=this.naturalWidth,height=this.naturalHeight,ratio=width/height,$(this).parent().css({"flex-grow":ratio,"flex-basis":ratio+"%"})})}),$(e).on("afterChange",function(e,i,s,n){$slideIndex=$(i.$slides.get(s)).attr("data-slick-index");var o={spread:$slideIndex};history.replaceState(o,"Jordan Hemingway",$slideIndex);var r=history.state;console.log(r);var a=$(".slick-active"),h=$(".slick-active .frame").length;t=0,1==h&&($(".spread").removeClass("im-finished"),$(a).addClass("im-finished")),$(".frame").removeClass("shown")}),$(e).click(function(e){var i=$("spreads").slick("slickCurrentSlide"),s=$(".slick-active"),n=$(".slick-active .frame").length;$(s).hasClass("im-finished")?($(".spreads").slick("slickNext"),t=1):(t++,targetFrame=$(".slick-active .frame:eq("+t+")"),t==n?$(".spreads").slick("slickNext"):$(targetFrame).addClass("shown"))}),$("#jh").click(function(e){$(".colophon").addClass("shown")}),$(".colophon").click(function(e){$(".colophon").removeClass("shown")}),window.onpopstate=function(e){var t=window.location.pathname,i=history.state;path=t.substring(1),""!=path&&$(".spreads").slick("slickGoTo",path)}});